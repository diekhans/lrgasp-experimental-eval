#!/usr/bin/env python3

from os import path as osp
import argparse
import re

def parseArgs():
    desc = """generate trackDb"""
    parser = argparse.ArgumentParser(description=desc)
    parser.add_argument("bamFiles", nargs='+',
                        help="""bam files""")
    return parser.parse_args()

trackTmpl = """
track {track}
type bam
visibility hide
shortLabel {label}
longLabel {label}
bigDataUrl {bam}
priority pri
html ../empty.html

"""

def mkTrackDb(bamFile, pri):
    label = osp.basename(osp.splitext(bamFile)[0])
    track = re.sub("[.=+-]", '_', label)
    print(trackTmpl.format(track=track, label=label, bam=bamFile, pri=pri))

def mkTranscriptomeBams(bamFiles):
    pri = 110
    for bamFile in bamFiles:
        mkTrackDb(bamFile, pri)
        pri += 1

mkTranscriptomeBams(parseArgs().bamFiles)
